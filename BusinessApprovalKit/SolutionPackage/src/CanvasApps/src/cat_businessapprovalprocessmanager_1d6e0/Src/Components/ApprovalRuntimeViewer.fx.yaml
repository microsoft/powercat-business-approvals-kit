ApprovalRuntimeViewer As CanvasComponent:
    ViewNode(RuntimeNodeId As String):
        RuntimeNodeId:
            Default: ="Text"
        ThisProperty:
            Default: ="Text"
    ViewStage(RuntimeStageId As String):
        RuntimeStageId:
            Default: ="Text"
        ThisProperty:
            Default: ="Text"
    Fill: =RGBA(0, 0, 0, 0)
    Height: =800
    ProcessRuntimeId: ="88679951-097f-ec11-8d20-000d3a0a0d6b"
    Width: =1000
    X: =0
    Y: =0
    ZIndex: =1

    galProcessStages_2 As gallery.variableTemplateHeightGallery:
        AccessibleLabel: ="Process stages"
        BorderColor: =RGBA(166, 166, 166, 1)
        DelayItemLoading: =true
        Height: =Parent.Height
        Items: |-
            =Filter(
                Filter('Business Approval Runtime Stages', 'Business Approval Runtime Stages (Views)'.'Active Business Approval Runtime Stages'),
                'Process Version'.'Business Approval Version' = GUID(Parent.ProcessRuntimeId)
            )
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        ShowNavigation: =true
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =235
        Visible: =CountRows(Self.AllItems) > 0
        Width: =Parent.Width
        ZIndex: =1

        stageBackground_2 As rectangle:
            BorderColor: =RGBA(105, 121, 126, 1)
            BorderThickness: =1
            DisplayMode: =DisplayMode.Disabled
            Fill: =RGBA(237, 237, 237, 1)
            FocusedBorderThickness: =4
            Height: |-
                =Max(
                    galStageNodes_1.Height + galStageNodes_1.Y,
                    lblNoNodeInStage_2.Y + lblNoNodeInStage_2.Height, 
                    galStageConditions_2.Y + galStageConditions_2.Height
                )
            HoverFill: =RGBA(105, 121, 126, 1)
            OnSelect: =
            PressedFill: =RGBA(105, 121, 126, 1)
            Tooltip: =
            Width: =Parent.TemplateWidth
            Y: =5
            ZIndex: =1

        lblGalStageName_2 As label:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(51, 51, 51, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            FontWeight: =FontWeight.Semibold
            Height: =30
            OnSelect: =Select(Parent)
            PaddingLeft: =8
            Size: =10
            Text: |-
                ="Stage: " & ThisItem.Name
            Tooltip: =Self.Text
            Width: =icoEditStage_2.X
            Wrap: =false
            Y: =stageBackground_2.Y
            ZIndex: =2

        icoEditStage_2 As icon.Edit:
            AccessibleLabel: ="Edit stage"
            BorderColor: =RGBA(166, 166, 166, 1)
            Color: =RGBA(105, 121, 126, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(220, 220, 220, 1)
            DisabledFill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =4
            Height: =30
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
            HoverFill: =RGBA(0, 0, 0, 0)
            Icon: =Icon.Information
            OnSelect: =ApprovalRuntimeViewer.ViewStage(ThisItem.'Business Approval Runtime Stage')
            PaddingBottom: =6
            PaddingLeft: =6
            PaddingRight: =6
            PaddingTop: =6
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
            PressedFill: =RGBA(0, 0, 0, 0)
            Width: =30
            X: =Parent.TemplateWidth - 60
            Y: =stageBackground_2.Y
            ZIndex: =3

        icoToggleStage_2 As icon.Edit:
            AccessibleLabel: ="Toggle hide/show stage"
            BorderColor: =RGBA(166, 166, 166, 1)
            Color: =RGBA(105, 121, 126, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(220, 220, 220, 1)
            DisabledFill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =4
            Height: =30
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
            HoverFill: =RGBA(0, 0, 0, 0)
            Icon: =If(ThisItem.'Business Approval Runtime Stage' in _collapsedStage.Value, Icon.ChevronDown, Icon.ChevronUp)
            OnSelect: |-
                =If(Self.Icon = Icon.ChevronUp, 
                    Collect(_collapsedStage, ThisItem.'Business Approval Runtime Stage'), 
                    RemoveIf(_collapsedStage, Value = ThisItem.'Business Approval Runtime Stage')
                )
            PaddingBottom: =6
            PaddingLeft: =6
            PaddingRight: =6
            PaddingTop: =6
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
            PressedFill: =RGBA(0, 0, 0, 0)
            Width: =30
            X: =Parent.TemplateWidth - Self.Width
            Y: =stageBackground_2.Y
            ZIndex: =4

        btnAddFirstNode_2 As button:
            BorderColor: =RGBA(74, 85, 88, 1)
            BorderThickness: =1
            Color: =RGBA(74, 85, 88, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =RGBA(204, 204, 204, 1)
            FocusedBorderColor: =ColorFade(Self.Fill, -75%)
            Font: =Font.'Segoe UI'
            FontWeight: =FontWeight.Semibold
            Height: =If(Self.Visible, 20, 0)
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(105, 121, 126, 1), -10%)
            OnSelect: |-
                =//ApprovalRuntimeViewer.AddNode(1, 1, ThisItem.Order, ThisItem.'Business Approval Runtime Stage')
                
                /*
                Set(_currentNodeIndex, 1);
                Set(_currentPathIndex, 1);
                Set(_currentStageCount, CountRows(galProcessStages_1.AllItems));
                Set(_selectedStage, ThisItem);
                Set(_selectedNode, Blank());
                Navigate(scrApprovalNodeEditor)*/
            PaddingBottom: =3
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            PressedBorderColor: =ColorFade(RGBA(105, 121, 126, 1), -50%)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =ColorFade(RGBA(105, 121, 126, 1), -30%)
            RadiusBottomLeft: =20
            RadiusBottomRight: =20
            RadiusTopLeft: =20
            RadiusTopRight: =20
            Size: =12
            Text: ="+"
            Visible: =!galStageNodes_1.Visible && ThisItem.'Stage Condition' = 'Business Approval Stage Condition'.None && icoToggleStage_2.Icon = Icon.ChevronUp
            Width: =20
            X: =Parent.TemplateWidth / 2 - Self.Width / 2
            Y: =lblGalStageName_2.Height
            ZIndex: =5

        lblNoNodeInStage_2 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(51, 51, 51, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            Height: =If(Self.Visible, 30, 0)
            OnSelect: =Select(Parent)
            Size: =9
            Text: ="No node configured for this stage. Click '+' to add first node."
            Visible: =btnAddFirstNode_2.Visible
            Width: =Parent.TemplateWidth
            X: =btnAddFirstNode_2.X + btnAddFirstNode_2.Width / 2 - Self.Width / 2
            Y: =btnAddFirstNode_2.Y + btnAddFirstNode_2.Height + 5
            ZIndex: =6

        lblStageConditionText_2 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(51, 51, 51, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            Height: =If(Self.Visible, 20, 0)
            OnSelect: =Select(Parent)
            Size: =8
            Text: |-
                ="If " & If(ThisItem.'Source Data Type' = 'Business Approval Condition Source Data'.'Request Data', 
                    ThisItem.'Source Data Name Value', ThisItem.'Source Data Type') & " " & ThisItem.Operand & 
                If(ThisItem.'Stage Condition' = 'Business Approval Stage Condition'.'If/Else', " " & 
                    First(Filter('Business Approval Runtime Conditions', Stage.'Business Approval Runtime Stage' = ThisItem.'Business Approval Runtime Stage')).'Condition Value Display'
                )
            Visible: =(ThisItem.'Stage Condition' <> 'Business Approval Stage Condition'.None) && icoToggleStage_2.Icon = Icon.ChevronUp
            Width: =Parent.TemplateWidth
            X: =btnAddFirstNode_2.X + btnAddFirstNode_2.Width / 2 - Self.Width / 2
            Y: =btnAddFirstNode_2.Y + btnAddFirstNode_2.Height + If(btnAddFirstNode_2.Visible, 5, 0)
            ZIndex: =7

        galStageNodes_1 As gallery.galleryVertical:
            BorderColor: =RGBA(255, 0, 0, 1)
            DelayItemLoading: =true
            Height: =If(Self.Visible, CountRows(Self.AllItems) * (Self.TemplateHeight + (2*Self.TemplatePadding)), 0)
            Items: |-
                =AddColumns(
                    GroupBy(
                        SortByColumns(
                            Filter('Business Approval Runtime Nodes', Stage.'Business Approval Runtime Stage' = ThisItem.'Business Approval Runtime Stage'), 
                            "cat_rowindex"
                        ), "cat_rowindex", "Nodes"
                    ), "Paths", ThisItem.Paths
                )
            Layout: =Layout.Vertical
            LoadingSpinner: =LoadingSpinner.Data
            ShowScrollbar: =false
            TemplatePadding: =0
            TemplateSize: =100
            Visible: =CountRows(Self.AllItems) > 0 && icoToggleStage_2.Icon = Icon.ChevronUp
            Width: =Parent.TemplateWidth
            Y: |-
                =If(ThisItem.'Stage Condition' = 'Business Approval Stage Condition'.None,
                    lblGalStageName_2.Height,
                    galStageConditions_2.Y + galStageConditions_2.Height
                )
            ZIndex: =12

            nodeLineCenter1_2 As rectangle:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                DisabledFill: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =28
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =false
                Width: =1
                X: =nodeBoxPath1_1.X + nodeBoxPath1_1.Width / 2
                Y: =nodeBoxPath1_1.Y + nodeBoxPath1_1.Height
                ZIndex: =1

            nodeBoxPath5_1 As rectangle:
                BorderColor: =RGBA(128, 128, 128, 1)
                BorderThickness: =1
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(255, 255, 255, 1)
                FocusedBorderThickness: =4
                Height: =88
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =!IsBlank(LookUp(ThisItem.Nodes, 'Path Index' = 5))
                Width: =nodeBoxPath1_1.Width
                X: |-
                    =With({pathWidth: Parent.Width / Coalesce(ThisItem.Paths, 1)}, (4 * pathWidth) + (pathWidth/2  - Self.Width / 2))
                Y: =
                ZIndex: =2

            nodeBoxPath4_1 As rectangle:
                BorderColor: =RGBA(128, 128, 128, 1)
                BorderThickness: =1
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(255, 255, 255, 1)
                FocusedBorderThickness: =4
                Height: =88
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =!IsBlank(LookUp(ThisItem.Nodes, 'Path Index' = 4))
                Width: =nodeBoxPath1_1.Width
                X: |-
                    =With({pathWidth: Parent.Width / Coalesce(ThisItem.Paths, 1)}, (3 * pathWidth) + (pathWidth/2  - Self.Width / 2))
                Y: =
                ZIndex: =3

            nodeBoxPath3_1 As rectangle:
                BorderColor: =RGBA(128, 128, 128, 1)
                BorderThickness: =1
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(255, 255, 255, 1)
                FocusedBorderThickness: =4
                Height: =88
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =!IsBlank(LookUp(ThisItem.Nodes, 'Path Index' = 3))
                Width: =nodeBoxPath1_1.Width
                X: |-
                    =With({pathWidth: Parent.Width / Coalesce(ThisItem.Paths, 1)}, (2 * pathWidth) + (pathWidth/2  - Self.Width / 2))
                Y: =
                ZIndex: =4

            nodeBoxPath2_1 As rectangle:
                BorderColor: =RGBA(128, 128, 128, 1)
                BorderThickness: =1
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(255, 255, 255, 1)
                FocusedBorderThickness: =4
                Height: =88
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =!IsBlank(LookUp(ThisItem.Nodes, 'Path Index' = 2))
                Width: =nodeBoxPath1_1.Width
                X: |-
                    =With({pathWidth: Parent.Width / Coalesce(ThisItem.Paths, 1)}, pathWidth + (pathWidth/2  - Self.Width / 2))
                Y: =
                ZIndex: =5

            nodeBoxPath1_1 As rectangle:
                BorderColor: =RGBA(128, 128, 128, 1)
                BorderThickness: =1
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(255, 255, 255, 1)
                FocusedBorderThickness: =4
                Height: =88
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =!IsBlank(LookUp(ThisItem.Nodes, 'Path Index' = 1))
                Width: =Min(300, (Parent.TemplateWidth / Coalesce(ThisItem.Paths, 1)) - 4)
                X: =(Parent.Width / Coalesce(ThisItem.Paths, 1)) / 2 - Self.Width / 2
                Y: =
                ZIndex: =6

            lblNodeApproversPath5_1 As htmlViewer:
                Color: =RGBA(128, 128, 128, 1)
                Font: =Font.'Segoe UI'
                Height: =60
                HtmlText: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 5)},
                        With({ nodeId: node.'Business Approval Runtime Node' }, "<div style='overflow:auto;margin:2px;height:54px;text-align:center'>" &
                            If(node.'Node Condition' = 'Business Approval Stage Condition'.None,
                                If(IsBlank(node.'Go To Stage'),    
                                    //show approvers              
                                    Concat(Split(node.Approvers, ", "), divStartTemplate_1.Text & Result & "</span></div>"),
                                    //show go to stage
                                    divStartTemplate_1.Text & "Go to <br/><b>" & node.'Go To Stage'.Name & "</b></span></div>"
                                ),
                    
                                //show conditions        
                                Concat(
                                    ShowColumns(
                                        Filter('Business Approval Runtime Conditions', Node.'Business Approval Runtime Node' = nodeId),
                                        "cat_conditionvaluedisplay", "cat_GoToStage"
                                    ), 
                                    divStartTemplate_1.Text & If(Len(cat_conditionvaluedisplay) > 0, "<b>" & cat_conditionvaluedisplay & "</b><br/>") & "Go to <br/><b>" & 
                                    cat_GoToStage.Name & "</b></span></div>"
                                )    
                            )
                        & "</div>")
                    )
                OnSelect: =
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =7
                Visible: =nodeBoxPath5_1.Visible
                Width: =nodeBoxPath1_1.Width
                X: =nodeBoxPath5_1.X
                Y: =lblNodeApproversPath1_1.Y
                ZIndex: =12

            lblNodeApproversPath4_1 As htmlViewer:
                Color: =RGBA(128, 128, 128, 1)
                Font: =Font.'Segoe UI'
                Height: =60
                HtmlText: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 4)},
                        With({ nodeId: node.'Business Approval Runtime Node' }, "<div style='overflow:auto;margin:2px;height:54px;text-align:center'>" &
                            If(node.'Node Condition' = 'Business Approval Stage Condition'.None,
                                If(IsBlank(node.'Go To Stage'),    
                                    //show approvers              
                                    Concat(Split(node.Approvers, ", "), divStartTemplate_1.Text & Result & "</span></div>"),
                                    //show go to stage
                                    divStartTemplate_1.Text & "Go to <br/><b>" & node.'Go To Stage'.Name & "</b></span></div>"
                                ),
                    
                                //show conditions        
                                Concat(
                                    ShowColumns(
                                        Filter('Business Approval Runtime Conditions', Node.'Business Approval Runtime Node' = nodeId),
                                        "cat_conditionvaluedisplay", "cat_GoToStage"
                                    ), 
                                    divStartTemplate_1.Text & If(Len(cat_conditionvaluedisplay) > 0, "<b>" & cat_conditionvaluedisplay & "</b><br/>") & "Go to <br/><b>" & 
                                    cat_GoToStage.Name & "</b></span></div>"
                                )    
                            )
                        & "</div>")
                    )
                OnSelect: =
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =7
                Visible: =nodeBoxPath4_1.Visible
                Width: =nodeBoxPath1_1.Width
                X: =nodeBoxPath4_1.X
                Y: =lblNodeApproversPath1_1.Y
                ZIndex: =13

            lblNodeApproversPath3_1 As htmlViewer:
                Color: =RGBA(128, 128, 128, 1)
                Font: =Font.'Segoe UI'
                Height: =60
                HtmlText: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 3)},
                        With({ nodeId: node.'Business Approval Runtime Node' }, "<div style='overflow:auto;margin:2px;height:54px;text-align:center'>" &
                            If(node.'Node Condition' = 'Business Approval Stage Condition'.None,
                                If(IsBlank(node.'Go To Stage'),    
                                    //show approvers              
                                    Concat(Split(node.Approvers, ", "), divStartTemplate_1.Text & Result & "</span></div>"),
                                    //show go to stage
                                    divStartTemplate_1.Text & "Go to <br/><b>" & node.'Go To Stage'.Name & "</b></span></div>"
                                ),
                    
                                //show conditions        
                                Concat(
                                    ShowColumns(
                                        Filter('Business Approval Runtime Conditions', Node.'Business Approval Runtime Node' = nodeId),
                                        "cat_conditionvaluedisplay", "cat_GoToStage"
                                    ), 
                                    divStartTemplate_1.Text & If(Len(cat_conditionvaluedisplay) > 0, "<b>" & cat_conditionvaluedisplay & "</b><br/>") & "Go to <br/><b>" & 
                                    cat_GoToStage.Name & "</b></span></div>"
                                )    
                            )
                        & "</div>")
                    )
                OnSelect: =
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =7
                Visible: =nodeBoxPath3_1.Visible
                Width: =nodeBoxPath1_1.Width
                X: =nodeBoxPath3_1.X
                Y: =lblNodeApproversPath1_1.Y
                ZIndex: =14

            lblNodeApproversPath2_1 As htmlViewer:
                Color: =RGBA(128, 128, 128, 1)
                Font: =Font.'Segoe UI'
                Height: =60
                HtmlText: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 2)},
                        With({ nodeId: node.'Business Approval Runtime Node' }, "<div style='overflow:auto;margin:2px;height:54px;text-align:center'>" &
                            If(node.'Node Condition' = 'Business Approval Stage Condition'.None,
                                If(IsBlank(node.'Go To Stage'),    
                                    //show approvers              
                                    Concat(Split(node.Approvers, ", "), divStartTemplate_1.Text & Result & "</span></div>"),
                                    //show go to stage
                                    divStartTemplate_1.Text & "Go to <br/><b>" & node.'Go To Stage'.Name & "</b></span></div>"
                                ),
                    
                                //show conditions        
                                Concat(ShowColumns(
                                    Filter('Business Approval Runtime Conditions', Node.'Business Approval Runtime Node' = nodeId), "cat_conditionvaluedisplay", "cat_GoToStage"
                                ), divStartTemplate_1.Text & If(Len(cat_conditionvaluedisplay) > 0, "<b>" & cat_conditionvaluedisplay & "</b><br/>") & 
                                "Go to <br/><b>" & cat_GoToStage.Name & "</b></span></div>")    
                            )
                        & "</div>")
                    )
                OnSelect: =
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =7
                Visible: =nodeBoxPath2_1.Visible
                Width: =nodeBoxPath1_1.Width
                X: =nodeBoxPath2_1.X
                Y: =lblNodeApproversPath1_1.Y
                ZIndex: =15

            lblNodeApproversPath1_1 As htmlViewer:
                Color: =RGBA(128, 128, 128, 1)
                Font: =Font.'Segoe UI'
                Height: =60
                HtmlText: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 1)},
                        With({ nodeId: node.'Business Approval Runtime Node' }, "<div style='overflow:auto;margin:2px;height:55px;text-align:center'>" &
                            If(node.'Node Condition' = 'Business Approval Stage Condition'.None,
                                If(IsBlank(node.'Go To Stage'),    
                                    //show approvers              
                                    Concat(Split(node.Approvers, ", "), divStartTemplate_1.Text & Result & "</span></div>"),
                                    //show go to stage
                                    divStartTemplate_1.Text & "Go to <br/><b>" & node.'Go To Stage'.Name & "</b></span></div>"
                                ),
                    
                                //show conditions        
                                Concat(
                                    ShowColumns(
                                        Filter('Business Approval Runtime Conditions', Node.'Business Approval Runtime Node' = nodeId),
                                        "cat_conditionvaluedisplay", "cat_GoToStage"
                                    ), 
                                    divStartTemplate_1.Text & If(Len(cat_conditionvaluedisplay) > 0, "<b>" & cat_conditionvaluedisplay & "</b><br/>") & "Go to <br/><b>" & 
                                    cat_GoToStage.Name & "</b></span></div>"
                                )    
                            )
                        & "</div>")
                    )
                OnSelect: =
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =7
                Visible: =nodeBoxPath1_1.Visible
                Width: =nodeBoxPath1_1.Width
                X: =nodeBoxPath1_1.X
                Y: =lblNodeNamePath1_1.Y + lblNodeNamePath1_1.Height
                ZIndex: =16

            lblNodeNamePath5_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(105, 121, 126, 1)
                BorderThickness: =1
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(225, 228, 229, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                OnSelect: =
                Size: =8
                Text: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 5)},
                        If(node.'Node Condition' = 'Business Approval Stage Condition'.None, 
                            node.Name, "If " & Coalesce(node.'Source Data Name Value', node.'Source Data Type') & " " & node.Operand
                        )
                    )
                Tooltip: =Self.Text
                Visible: =nodeBoxPath5_1.Visible
                Width: =nodeBoxPath1_1.Width - 2
                Wrap: =false
                X: =nodeBoxPath5_1.X + 1
                Y: =lblNodeNamePath1_1.Y
                ZIndex: =17

            lblNodeNamePath4_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(105, 121, 126, 1)
                BorderThickness: =1
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(225, 228, 229, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                OnSelect: =
                Size: =8
                Text: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 4)},
                        If(node.'Node Condition' = 'Business Approval Stage Condition'.None, 
                            node.Name, "If " & Coalesce(node.'Source Data Name Value', node.'Source Data Type') & " " & node.Operand
                        )
                    )
                Tooltip: =Self.Text
                Visible: =nodeBoxPath4_1.Visible
                Width: =nodeBoxPath1_1.Width - 2
                Wrap: =false
                X: =nodeBoxPath4_1.X + 1
                Y: =lblNodeNamePath1_1.Y
                ZIndex: =18

            lblNodeNamePath3_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(105, 121, 126, 1)
                BorderThickness: =1
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(225, 228, 229, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                OnSelect: =
                Size: =8
                Text: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 3)},
                        If(node.'Node Condition' = 'Business Approval Stage Condition'.None, 
                            node.Name, "If " & Coalesce(node.'Source Data Name Value', node.'Source Data Type') & " " & node.Operand
                        )
                    )
                Tooltip: =Self.Text
                Visible: =nodeBoxPath3_1.Visible
                Width: =nodeBoxPath1_1.Width - 2
                Wrap: =false
                X: =nodeBoxPath3_1.X + 1
                Y: =lblNodeNamePath1_1.Y
                ZIndex: =19

            lblNodeNamePath2_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(105, 121, 126, 1)
                BorderThickness: =1
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(225, 228, 229, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                OnSelect: =
                Size: =8
                Text: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 2)},
                        If(node.'Node Condition' = 'Business Approval Stage Condition'.None, 
                            node.Name, "If " & Coalesce(node.'Source Data Name Value', node.'Source Data Type') & " " & node.Operand
                        )
                    )
                Tooltip: =Self.Text
                Visible: =nodeBoxPath2_1.Visible
                Width: =nodeBoxPath1_1.Width - 2
                Wrap: =false
                X: =nodeBoxPath2_1.X + 1
                Y: =lblNodeNamePath1_1.Y
                ZIndex: =20

            lblNodeNamePath1_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(105, 121, 126, 1)
                BorderThickness: =1
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(225, 228, 229, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                OnSelect: =
                Size: =8
                Text: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 1)},   
                        If(node.'Node Condition' = 'Business Approval Stage Condition'.None, 
                            node.Name, "If " & Coalesce(node.'Source Data Name Value', node.'Source Data Type') & " " & node.Operand
                        )
                    )
                Tooltip: =Self.Text
                Visible: =nodeBoxPath1_1.Visible
                Width: =nodeBoxPath1_1.Width - 2
                Wrap: =false
                X: =nodeBoxPath1_1.X + 1
                Y: =nodeBoxPath1_1.Y + 1
                ZIndex: =21

            icoEditNodePath5_1 As icon.Edit:
                AccessibleLabel: =$"Edit node { lblNodeNamePath5_1.Text }"
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(105, 121, 126, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =30
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.Information
                OnSelect: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 5) },
                        ApprovalRuntimeViewer.ViewNode(node.'Business Approval Runtime Node')
                    )
                PaddingBottom: =8
                PaddingLeft: =8
                PaddingRight: =8
                PaddingTop: =8
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Tooltip: =
                Visible: =nodeBoxPath5_1.Visible
                Width: =30
                X: =nodeBoxPath5_1.X + nodeBoxPath5_1.Width - Self.Width
                Y: =icoEditNodePath1_1.Y
                ZIndex: =22

            icoEditNodePath4_1 As icon.Edit:
                AccessibleLabel: =$"Edit node { lblNodeNamePath4_1.Text }"
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(105, 121, 126, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =30
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.Information
                OnSelect: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 4) },
                        ApprovalRuntimeViewer.ViewNode(node.'Business Approval Runtime Node')
                    )
                PaddingBottom: =8
                PaddingLeft: =8
                PaddingRight: =8
                PaddingTop: =8
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Tooltip: =
                Visible: =nodeBoxPath4_1.Visible
                Width: =30
                X: =nodeBoxPath4_1.X + nodeBoxPath4_1.Width - Self.Width
                Y: =icoEditNodePath1_1.Y
                ZIndex: =23

            icoEditNodePath3_1 As icon.Edit:
                AccessibleLabel: =$"Edit node { lblNodeNamePath3_1.Text }"
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(105, 121, 126, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =30
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.Information
                OnSelect: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 3) },
                        ApprovalRuntimeViewer.ViewNode(node.'Business Approval Runtime Node')
                    )
                PaddingBottom: =8
                PaddingLeft: =8
                PaddingRight: =8
                PaddingTop: =8
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Tooltip: =
                Visible: =nodeBoxPath3_1.Visible
                Width: =30
                X: =nodeBoxPath3_1.X + nodeBoxPath3_1.Width - Self.Width
                Y: =icoEditNodePath1_1.Y
                ZIndex: =24

            icoEditNodePath2_1 As icon.Edit:
                AccessibleLabel: =$"Edit node { lblNodeNamePath2_1.Text }"
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(105, 121, 126, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =30
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.Information
                OnSelect: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 2) },
                        ApprovalRuntimeViewer.ViewNode(node.'Business Approval Runtime Node')
                    )
                PaddingBottom: =8
                PaddingLeft: =8
                PaddingRight: =8
                PaddingTop: =8
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Tooltip: =
                Visible: =nodeBoxPath2_1.Visible
                Width: =30
                X: =nodeBoxPath2_1.X + nodeBoxPath2_1.Width - Self.Width
                Y: =icoEditNodePath1_1.Y
                ZIndex: =25

            icoEditNodePath1_1 As icon.Edit:
                AccessibleLabel: =$"Edit node { lblNodeNamePath1_1.Text }"
                BorderColor: =RGBA(166, 166, 166, 1)
                Color: =RGBA(105, 121, 126, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(220, 220, 220, 1)
                DisabledFill: =RGBA(0, 0, 0, 0)
                FocusedBorderThickness: =4
                Height: =30
                HoverBorderColor: =RGBA(0, 0, 0, 0)
                HoverColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                HoverFill: =RGBA(0, 0, 0, 0)
                Icon: =Icon.Information
                OnSelect: |-
                    =With({ node: LookUp(ThisItem.Nodes, 'Path Index' = 1) },
                        ApprovalRuntimeViewer.ViewNode(node.'Business Approval Runtime Node')
                    )
                PaddingBottom: =8
                PaddingLeft: =8
                PaddingRight: =8
                PaddingTop: =8
                PressedBorderColor: =RGBA(0, 0, 0, 0)
                PressedColor: =ColorFade(RGBA(105, 121, 126, 1), -30%)
                PressedFill: =RGBA(0, 0, 0, 0)
                Tooltip: =
                Visible: =nodeBoxPath1_1.Visible
                Width: =30
                X: =nodeBoxPath1_1.X + nodeBoxPath1_1.Width - Self.Width
                Y: =lblNodeNamePath1_1.Y + lblNodeNamePath1_1.Height / 2 - Self.Height / 2
                ZIndex: =26

        galStageConditions_2 As gallery.galleryVertical:
            AccessibleLabel: ="Stage conditions"
            BorderColor: =RGBA(166, 166, 166, 1)
            Height: =If(Self.Visible, 33, 0)
            Items: |-
                =AddColumns(
                    SortByColumns(
                        Filter('Business Approval Runtime Conditions', Stage.'Business Approval Runtime Stage' = ThisItem.'Business Approval Runtime Stage'), 
                        "cat_pathindex"
                    ),
                   "StageSelection", ThisItem
                )
            Layout: =Layout.Vertical
            OnSelect: =
            ShowScrollbar: =false
            TemplatePadding: =0
            TemplateSize: =Self.Height
            Visible: =CountRows(Self.AllItems) > 0 && icoToggleStage_2.Icon = Icon.ChevronUp && ThisItem.'Stage Condition' <> 'Business Approval Stage Condition'.None
            Width: =Parent.TemplateWidth
            WrapCount: =Max(2, CountRows(Self.AllItems))
            Y: =lblStageConditionText_2.Y + lblStageConditionText_2.Height
            ZIndex: =13

            nodeLineRightH_4 As rectangle:
                BorderColor: =RGBA(105, 121, 126, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =1
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =Select(Parent)
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =ThisItem.'Path Index' < ThisItem.StageSelection.Paths
                Width: =Parent.TemplateWidth / 2
                X: =nodeLineCondition_8.X
                ZIndex: =1

            nodeLineLeftH_8 As rectangle:
                BorderColor: =RGBA(105, 121, 126, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =1
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =Select(Parent)
                PressedFill: =RGBA(105, 121, 126, 1)
                Visible: =ThisItem.'Path Index' > 1
                Width: =Parent.TemplateWidth / 2
                ZIndex: =7

            nodeLineCondition_8 As rectangle:
                BorderColor: =RGBA(0, 0, 0, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =10
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Width: =1
                X: =Parent.TemplateWidth / 2 - Self.Width / 2
                ZIndex: =8

            lblConditionTarget_6 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Fill: =RGBA(237, 237, 237, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                PaddingTop: =0
                Size: =8
                Text: |-
                    =If(ThisItem.StageSelection.'Stage Condition' = 'Business Approval Stage Condition'.'If/Else', "TRUE",
                        If(ThisItem.'Condition Data Type' = 'Business Approval Condition Target Data'.'Request Data',
                            ThisItem.'Condition Data'.Name, 
                            ThisItem.'Condition Value'
                        )
                    )
                Width: =nodeLineRightH_4.Width
                X: =Parent.TemplateWidth / 2 - Self.Width / 2
                Y: =10
                ZIndex: =9

        conFalsePath_2 As groupContainer:
            BorderColor: =RGBA(105, 121, 126, 1)
            Height: =galStageConditions_2.Height
            Visible: =ThisItem.'Stage Condition' = 'Business Approval Stage Condition'.'If/Else' && icoToggleStage_2.Icon = Icon.ChevronUp
            Width: =galStageConditions_2.TemplateWidth
            X: =galStageConditions_2.X + galStageConditions_2.Width / 2
            Y: =galStageConditions_2.Y
            ZIndex: =14

            nodeLineLeftH_9 As rectangle:
                BorderColor: =RGBA(105, 121, 126, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =1
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Width: =Parent.Width / 2
                ZIndex: =3

            nodeLineCondition_9 As rectangle:
                BorderColor: =RGBA(0, 0, 0, 1)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(128, 128, 128, 1)
                FocusedBorderThickness: =4
                Height: =10
                HoverFill: =RGBA(105, 121, 126, 1)
                OnSelect: =
                PressedFill: =RGBA(105, 121, 126, 1)
                Width: =1
                X: =nodeLineLeftH_9.X + nodeLineLeftH_9.Width - 1
                ZIndex: =4

            Label3_5 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderStyle: =BorderStyle.None
                BorderThickness: =2
                Color: =RGBA(51, 51, 51, 1)
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FocusedBorderThickness: =4
                Font: =Font.'Segoe UI'
                Height: =28
                PaddingTop: =0
                Size: =9
                Text: ="FALSE"
                Width: =250
                X: =Parent.Width / 2 - Self.Width / 2
                Y: =10
                ZIndex: =5

    divStartTemplate_1 As label:
        BorderColor: =RGBA(0, 0, 0, 0)
        BorderStyle: =BorderStyle.None
        BorderThickness: =2
        Color: =RGBA(51, 51, 51, 1)
        DisabledBorderColor: =RGBA(0, 0, 0, 0)
        DisabledColor: =RGBA(166, 166, 166, 1)
        FocusedBorderThickness: =4
        Font: =Font.'Segoe UI'
        Height: =0
        PaddingBottom: =0
        PaddingLeft: =0
        PaddingRight: =0
        PaddingTop: =0
        Size: =13
        Text: |-
            ="<div style='border: 1px solid #888;line-height:50px;height:50px;width:50px;word-wrap:normal;display:inline-block;text-align:center;vertical-align:middle;margin:2px;padding:0px 2px 4px 2px'><span style='line-height:11px;display:inline-block;vertical-align:middle'>"
        Visible: =false
        Width: =0
        ZIndex: =2

