App As appinfo:
    BackEnabled: =false
    OnStart: |-
        =//Passing record ID from main view
        Set(inputParameters,Param("recordId"));
        Set(props, Match(inputParameters, "\""prop1"":""(?<prop1>[^""]*)"",""prop2"":""(?<prop2>[^""]*)"));
        Set(
            varRecordIdParameter,
            If(props.prop2 = "form",
                Match(props.prop1,"\{(?<guid>.+?)\}").guid,
                props.prop1
            )
        );
        Set(
            varRecordId,
            GUID(varRecordIdParameter)
        );
        If(
            IsBlankOrError(
                LookUp(
                    'Business Approval Processes',
                    'Business Approval Process' = varRecordId
                )
            ),
            Set(_selectedProcess,
                /* LookUp(
                    'Business Approval Processes',
                    'Business Approval Process' = GUID("a24bac16-cfb1-ed11-83fe-0022482a97de")
                ) 
                */
                Blank(); 
            );
            NewForm(frmProcess),
            Set(_selectedProcess,
                LookUp(
                    'Business Approval Processes',
                    'Business Approval Process' = varRecordId
                )
            )
        );
        
        // Set themeing
        Set(
            AppTheme,
            /* START THEME OBJECT */
            {
                palette: {
                    themePrimary: "#0078d4",
                    themeLighterAlt: "#eff6fc",
                    themeLighter: "#deecf9",
                    themeLight: "#c7e0f4",
                    themeTertiary: "#71afe5",
                    themeSecondary: "#2b88d8",
                    themeDarkAlt: "#106ebe",
                    themeDark: "#005a9e",
                    themeDarker: "#004578",
                    neutralLighterAlt: "#faf9f8",
                    neutralLighter: "#f3f2f1",
                    neutralLight: "#edebe9",
                    neutralQuaternaryAlt: "#e1dfdd",
                    neutralQuaternary: "#d0d0d0",
                    neutralTertiaryAlt: "#c8c6c4",
                    neutralTertiary: "#a19f9d",
                    neutralSecondary: "#605e5c",
                    neutralPrimaryAlt: "#3b3a39",
                    neutralPrimary:"#323130",
                    neutralDark: "#201f1e",
                    black: "#000000",
                    white: "#ffffff"
                }
            }
            /* END THEME OBJECT */
        );
        Set(
            AppThemeJson,
            JSON(
                AppTheme,
                JSONFormat.IndentFour
            )
        );
        
        /* Set(
            varRecordIds,
            ForAll(
                Split(varRecordIdParameter,","),
                GUID(ThisRecord.Result)
            )
        );
        */
        /*
        ClearCollect(colBusinessApprovalOverrides,
            ForAll(Filter('Business Approval Instances', 'Business Approval Instance' in varRecordIds),
                {
                    id:ThisRecord.'Business Approval Instance',
                    instanceno:ThisRecord.'Instance No',
                    approver:ThisRecord.'Approver UPN',
                    instancestatus:'Instance Status'
                }
            )
        )
        */

    Host As hostControl.DefaultHostControlVariant:
        OnCancel: =false
        OnEdit: =false
        OnNew: =false
        OnSave: =false
        OnView: =false

